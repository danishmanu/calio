<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/9b0c73d784.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/public/css/style.css">
   

    <title>login</title>
</head>
<style>
  .form-container {
    width: 80%; /* Adjust width as needed */
    max-width: 600px; /* Optional: set a max width */
}
</style>
<body class="sign_body overflow-hidden container-fluid ps-0 ">
    <section class="section">
        <div class="row pe-0">
            <div class=" col-sm-6 pe-0">
              <img class="img-fluid w-100 h-100 object-fit-cover  d-none d-md-block" src="/public/images/signup.jpg" alt="">
            </div>
            <div class="col-sm-6  pt-3 ps-0 ps-md-5 mt-5 d-flex justify-content-center justify-content-md-start  pe-0">
                 
                <form method="post" class="w-50" action="/signup" onsubmit="return validRegister(); " >
                    <H2 class="mb-5 ">Create an account</H2>
                    
                    <p>Enter your details below</p>
                    <a href="" class="text-danger text-decoration-none"><%= locals.msg? msg:null %></a>
                    <div class="mb-4">
                     
                        <input type="text" name="username" class="form-control rounded-0 border-0 border-bottom border-dark" id="username" aria-describedby="emailHelp" placeholder="Username" required>
                        <p id="name-error" class="text-danger text-decoration-none"></p>
                    </div>
                    <div class="mb-4">
                     
                        <input type="email" name="email" class="form-control rounded-0 border-0 border-bottom border-dark" id="email" aria-describedby="emailHelp" placeholder="Email"required>
                        <p id="email-error" class="text-danger text-decoration-none"></p>
                    </div>
                    <div class="mb-3">
                     
                      <input type="number" name="phone"  class="form-control rounded-0 border-0 border-bottom border-dark" id="phone_number" placeholder="Phone Number">
                      <p id="mobile-error" class="text-danger text-decoration-none"></p>
                    </div>
                    <div class="mb-3">
                     
                        <input type="password" name="password" class="form-control rounded-0 border-0 border-bottom border-dark" id="password" placeholder="Password" required>
                        <p id="password-error" class="text-danger text-decoration-none"></p>
                      </div>
                      <div class="mb-3">
                     
                        <input type="password" name="conform_password" class="form-control rounded-0 border-0 border-bottom border-dark" id="conform_password" placeholder="Confirm Password" required>
                        <p id="password-mismatch" style="display:none; color:red;">Passwords do not match</p>
                   
                       
                      </div>
                   <div class="row pt-3">
                    <div class="col-12 col-md-6">
                     
                        <button type="submit" value="submit" class="btn btn-primary px-5 w-100">Signup</button>
                    </div>
                    
                   
                   </div>
                 

                   
                  </form>
            </div>
        </div>
      </section>
<script>
  function validRegister() {
  const username = document.getElementById('username').value;
const email = document.getElementById('email').value;
  const mobile = document.getElementById('phone_number').value;
  const password = document.getElementById('password').value;
  const conform_password = document.getElementById('conform_password').value;

  // Clear any previous error messages
  document.getElementById('name-error').textContent = '';

  document.getElementById('email-error').textContent = '';
  document.getElementById('mobile-error').textContent = '';
  document.getElementById('password-error').textContent = '';
  document.getElementById('password-mismatch').style.display = 'none';

  console.log(username.trim())
  if (!username || username.trim().length==0) {
      document.getElementById('name-error').textContent = 'Username field should not be empty!';
      return false;
  }



    
  if (!email) {
      document.getElementById('email-error').textContent = 'Email field should not be empty!';
      return false;
  }

  const emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;

  if (!email || !emailRegex.test(email)) {
    document.getElementById('email-error').textContent = 'Please enter a valid email address. (eg: example@gmail.com)';
    return false;
}

const mobileRegex = /^[6-9]\d{9}$/;

if (!mobile || !mobileRegex.test(mobile)) {
    document.getElementById('mobile-error').textContent = 'Mobile number should be a 10-digit valid number';
    return false;
}

if (new Set(mobile).size === 1) {
    document.getElementById('mobile-error').textContent = 'Mobile number should not consist of the same digit.';
    return false;
}

const passwordRegex =  /^(?=.*[!@#$%^&*]).{6,}$/;
  
if (!password || !passwordRegex.test(password)) {
    document.getElementById('password-error').textContent = 'Password must be at least 6 characters and contain a special character.';
    return false;
}

  if (password !== conform_password) {
      document.getElementById('password-mismatch').style.display = 'block';
      return false;
  }

  return true;
}

   
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>