<%- include('../partials/head.ejs') %>
<%- include('../partials/header.ejs') %>
<style>
 

</style>

<div class="row">
  <div id="carouselExampleControls" class="carousel slide mt-5" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="https://fragranceheaven.in/cdn/shop/files/AFNAN_PERFUMES_1_1920x.png?v=1711668244" alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://fragranceheaven.in/cdn/shop/files/Banner-3_1920x.png?v=1699344881" alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://fragranceheaven.in/cdn/shop/files/Banner-1_38398759-d945-47cf-a283-fe9fd38e5137_1920x.png?v=1699344649" alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
    <div class="d-flex justify-content-center">
    <h1 class="fw-bold mt-5">Exclusive Products</h1>
    </div>
    <div class="best_sell ml-0 container w-100">
        <div class="row month">
            <div class="box bg-primary rounded-1  me-2"style="width: 20px; height: 30px; ">
           
            </div>
            This Month
        </div>
        <div class="row w-100 mt-3">
            <div class="col-8">
                <h4 class="fw-bold ">Best Selling Products</h4>
            </div>
            <div class="col-4">
                <button class="btn btn-primary">View More</button>
            </div>
         </div>
         </div>
        <div class="container w-100 row mt-5 d-flex justify-content-center">
            <% products.forEach((product)=>{ %>
             
            <div class="col-sm-6  col-md-4 col-lg-3 ms-2 border border-1 mb-4">

                <div class="card">
                    <a href="/product/<%= product._id %>">
                    <div class="icons d-flex flex-column">
                        <button type="button" class="btn mb-2" onclick="addToWishlist(event,`<%=product._id%>`)"><i class="bi bi-heart"></i></button>
                        <button class="btn"><i class="bi bi-eye"></i></button>
                    </div>
                    <img src="/public/uploads/<%= product.images[0] %>" class="card-img-top" alt="Product Image">
                    <div class="card-body text-center">
                        <h5 class="product-title"><%=product.name %></h5>
                        <% if(product.offer &&product.offer.discountPercentage && new Date()<product.offer.expirAt ){%>
                        <div class="price">
                            <span>₹<%=product.price-(product.price*(product.offer.discountPercentage/100))%></span>
                            <span class="text-muted">₹<%=product.price%></span>
                            <span class="text-success">(<%=product.offer.discountPercentage%>%Off)</span>
                        </div>
                        <% } else{ %>
                        <div class="price">
                          <span>₹<%=product.price%></span>
                          
                      </div>
                      <% } %>
                        <div class="rating mt-2">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <span class="reviews">(65)</span>
                        </div>
                    </div>
               </a>
                </div>
            </div>
        
            <% }) %>
            
           
        </div>
        
    </div>
    
    <div class="container py-5">
        <h2 class="text-center mb-5 fw-bolder">New Arrivals</h2>
        <div class="row g-4">
          <div class="col-md-6">
            <div class="main_card card">
              <img src="/public/images/men.jpg" class="card-img" alt="Hugo Boss Deodorant">
              <div class="card-img-overlay d-flex align-items-end">
                <div class="card-overlay">
                  <h5 class="card-title fw-bolder">Hugo Boss The Scent Deodorant For Men</h5>
                  <p class="card-text">Stay fresh with the irresistible scent of ginger, maninka fruit, and leather. Long-lasting protection for the confident man.</p>
                  <a href="#" class="" style="text-decoration: underline; color: rgb(205, 205, 205);">Shop Now</a>
                </div>
              </div>
            </div>
          </div>
    
          <div class="col-md-6">
            <div class="row g-4">
              <div class="col-md-12">
                <div class="bot-card card">
                  <img src="/public/images/newp.jpg" class="card-img" alt="L'Imperatrice">
                  <div class="card-img-overlay d-flex align-items-end">
                    <div class="card-overlay">
                      <h5 class="card-title fw-bolder">L'Imperatrice Eau de Toilette</h5>
                      <p class="card-text">Bright, fruity notes to give you a fresh vibe.</p>
                      <a href="#" style="text-decoration: underline;color: rgb(205, 205, 205); ">Shop Now</a>
                    </div>
                  </div>
                </div>
              </div>
    
              <div class="col-md-6">
                <div class="bot-card card">
                  <img src="/public/images/d4f5ac02d94531e7be0ca4fae72736aa.jpg" class="card-img" alt="Delilah Pour Femme">
                  <div class="card-img-overlay d-flex align-items-end">
                    <div class="card-overlay">
                      <h5 class="card-title fw-bolder">Delilah Pour Femme</h5>
                      <p class="card-text">By Mathew Alexander. Eau de Parfum 100 ml.</p>
                      <a href="#" class="" style="text-decoration: underline;color: rgb(205, 205, 205);">Shop Now</a>
                    </div>
                  </div>
                </div>
              </div>
    
              <div class="col-md-6">
                <div class="bot-card card">
                  <img src="/public/images/5c18510f77816e081c354a69c96a1f47.jpg" class="card-img" alt="Clive Christian">
                  <div class="card-img-overlay d-flex align-items-end">
                    <div class="card-overlay">
                      <h5 class="card-title fw-bolder">Clive Christian</h5>
                      <p class="card-text">EST 1872 Edition – Citrus & Woody, 50 ml.</p>
                      <a href="#" class="" style="text-decoration: underline;color: rgb(205, 205, 205);">Shop Now</a>
                    </div>
                  </div>
                </div>
              </div>
    
            </div>
          </div>
        </div>
      </div>
    
        <div class="container">
            <div class="d-flex justify-content-center">
                <h1 class="fw-bold mt-5">Shop By Brands</h1>
                </div>
                <div class="best_sell ml-0 container w-100">
                   
                    <div class="row w-100 mt-3">
                        <div class="col-8">
                            <h4 class="fw-bold ">Popular Brand</h4>
                        </div>
                        <div class="col-4">
                            <button class="btn btn-primary">View More</button>
                        </div>
                     </div>

                     </div>
            <div class="row">
              <% popularBrands.forEach((brand)=>{ %>
                <div class=" col-12 col-md-6 col-lg-3 mt-3 mb-3">
                  <a href="/shop?brand=<%=brand.brand_name  %>">  <img class="brand_img" src="/public/uploads/<%=brand.brandImage  %>" alt="">
                  </a>
                </div>
             <%  })  %>
               
            </div>
      
    </div>
   
</div>
<div class="container-fluid icon-feature-container">
    <div class="row text-center">
       
        <div class="col-12 col-md-3 icon-feature">
            <i class="bi bi-truck"></i>
            <h5>Free Shipping</h5>
            <p>orders $50 or more</p>
        </div>

        
        <div class="col-12 col-md-3 icon-feature">
            <i class="bi bi-arrow-counterclockwise"></i>
            <h5>Free Returns</h5>
            <p>within 30 days</p>
        </div>

       
        <div class="col-12 col-md-3 icon-feature">
            <i class="bi bi-info-circle"></i>
            <h5>Get 20% Off 1 Item</h5>
            <p>When you sign up</p>
        </div>

        
        <div class="col-12 col-md-3 icon-feature">
            <i class="fa-solid fa-headset"></i>
            <h5>We Support</h5>
            <p>24/7 amazing services</p>
        </div>
    </div>
</div>

<script>
 
      async function addToWishlist(event,product_Id) {
  try {
    event.preventDefault()
    let response = await fetch("/addToWishlist", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ product_Id })
    });

    let data = await response.json();

    if (data.success) {
    
      Swal.fire({
        icon: 'success',
        title: 'Added!',
        text: 'Product added to wishlist successfully.',
        showConfirmButton: false,
        timer: 1500
      });
      console.log(data.count)
      document.getElementById("wishlist-count").innerText = data.count; 
    }
    else if(data.exist){
      Swal.fire({
        icon: 'info',
        title: 'Already in Wishlist!',
        text: 'This product is already in your wishlist.',
        showCancelButton: true,
        confirmButtonText: 'Go to Wishlist',
        cancelButtonText: 'Continue Shopping'
      }).then((result) => {
        if (result.isConfirmed) {
          
          window.location.href = "/wishlist";
        }
      });
    }
     else {
      
      Swal.fire({
        icon: 'error',
        title: 'Failed!',
        text: 'Could not add the product to wishlist.',
        confirmButtonText: 'Try Again'
      });
    }
  } catch (error) {
    console.error("Error:", error);
    Swal.fire({
      icon: 'error',
      title: 'Error!',
      text: 'An error occurred while adding the product to the wishlist.',
      confirmButtonText: 'OK'
    });
  }
      }
</script>
<%- include('../partials/footer.ejs') %>